(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(45)},24:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),i=(n(24),n(17)),l=n(18),s=n(2),u=n(3),d=n(5),m=n(4),h=n(6),p=n(7),f=n.n(p),v=Object({NODE_ENV:"production",PUBLIC_URL:"/account-app"}).ACCOUNT_APP_API_RECORDS_URL||"https://5bc75e56cc83760013c1cce0.mockapi.io",b=n(8),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={date:"",title:"",amount:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onChangeHandler",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(b.a)({},t,n))}},{key:"onSubmitHandler",value:function(e){var t=this;e.preventDefault();var n,a={date:this.state.date,title:this.state.title,amount:this.state.amount};(n=a,f.a.post("".concat(v,"/api/v1/records"),n)).then(function(e){t.props.handleNewRecord(e.data),t.setState({date:"",title:"",amount:""})}).catch(function(e){return console.log(e)})}},{key:"valid",value:function(){return this.state.date&&this.state.title&&this.state.amount}},{key:"render",value:function(){return r.a.createElement("form",{className:"form-inline m-3 col",onSubmit:this.onSubmitHandler.bind(this)},r.a.createElement("div",{className:"form-group mr-2"},r.a.createElement("input",{type:"text",placeholder:"Date",name:"date",value:this.state.date,onChange:this.onChangeHandler.bind(this)})),r.a.createElement("div",{className:"form-group mr-2"},r.a.createElement("input",{type:"text",placeholder:"Title",name:"title",value:this.state.title,onChange:this.onChangeHandler.bind(this)})),r.a.createElement("div",{className:"form-group mr-2"},r.a.createElement("input",{type:"text",placeholder:"Amount",name:"amount",value:this.state.amount,onChange:this.onChangeHandler.bind(this)})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!this.valid()},"Create Record"))}}]),t}(r.a.Component),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={edit:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleEdit",value:function(){this.setState({edit:!this.state.edit})}},{key:"handleUpdate",value:function(e){var t=this;e.preventDefault();var n={date:this.refs.date.value,title:this.refs.title.value,amount:Number.parseInt(this.refs.amount.value,0)};(function(e,t){return f.a.put("".concat(v,"/api/v1/records/").concat(e),t)})(this.props.record.id,n).then(function(e){t.props.handleUpdateRecord(e.data),t.setState({edit:!1})}).catch(function(e){return console.log(e)})}},{key:"handleDelete",value:function(e){var t,n=this;(t=this.props.record.id,f.a.delete("".concat(v,"/api/v1/records/").concat(t))).then(function(e){n.props.handleDeleteRecord(e.data)}).catch(function(e){return console.log(e)})}},{key:"recordRowComponent",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",null,"\uffe5",this.props.record.date),r.a.createElement("th",null,"\uffe5",this.props.record.title),r.a.createElement("th",null,"\uffe5",this.props.record.amount),r.a.createElement("th",null,r.a.createElement("button",{className:"btn btn-info mr-1",onClick:this.handleEdit.bind(this)},"Edit"),r.a.createElement("button",{className:"btn btn-danger mr-1",onClick:this.handleDelete.bind(this)},"Delete")))}},{key:"editRecordComponent",value:function(){return r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.props.record.date,ref:"date"})),r.a.createElement("th",null,r.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.props.record.title,ref:"title"})),r.a.createElement("th",null,r.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.props.record.amount,ref:"amount"})),r.a.createElement("th",null,r.a.createElement("button",{className:"btn btn-info mr-1",onClick:this.handleUpdate.bind(this)},"Update"),r.a.createElement("button",{className:"btn btn-danger mr-1",onClick:this.handleEdit.bind(this)},"Cancel")))}},{key:"render",value:function(){return this.state.edit?this.editRecordComponent():this.recordRowComponent()}}]),t}(r.a.Component);function y(e){return r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-".concat(e.type," text-white")},e.name),r.a.createElement("div",{className:"card-body"},e.amount)))}var k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={records:[],error:null,isLoaded:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get("".concat(v,"/api/v1/records")).then(function(t){return e.setState({records:t.data,isLoaded:!0})}).catch(function(t){return e.setState({error:t,isLoaded:!0},function(){return console.log(t)})})}},{key:"addRecord",value:function(e){this.setState({error:null,isLoaded:!0,records:Object(l.a)(this.state.records).concat([e])})}},{key:"editRecord",value:function(e){console.log(e);var t=this.state.records.map(function(t){return t.id!==e.id?t:Object(i.a)({},t,e)});this.setState({records:t})}},{key:"deleteRecord",value:function(e){var t=this.state.records.filter(function(t){return t.id!==e.id});this.setState({records:t})}},{key:"income",value:function(){var e=this.state.records.filter(function(e){return e.amount>=0});return e.length>0?e.reduce(function(e,t){return e+Number.parseInt(t.amount,0)},0):0}},{key:"balance",value:function(){return this.income()+this.disbursement()}},{key:"disbursement",value:function(){var e=this.state.records.filter(function(e){return e.amount<0});return e.length>0?e.reduce(function(e,t){return e+Number.parseInt(t.amount,0)},0):0}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,a=t.isLoaded,o=t.records,c=null;return c=n?r.a.createElement("div",null,n.message):a?r.a.createElement("table",{className:"table table-bordered m-3"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Opertion"))),r.a.createElement("tbody",null,o.map(function(t,n){return r.a.createElement(g,{key:n,record:t,handleUpdateRecord:e.editRecord.bind(e),handleDeleteRecord:e.deleteRecord.bind(e)})}))):r.a.createElement("div",null,"Loading..."),r.a.createElement("div",null,r.a.createElement("h1",null,"Records"),r.a.createElement("div",{className:"form-inline m-3"},r.a.createElement(y,{type:"info",name:"income",amount:this.income()}),r.a.createElement(y,{type:"danger",name:"Disbursement",amount:this.disbursement()}),r.a.createElement(y,{type:"success",name:"Balance",amount:this.balance()})),r.a.createElement(E,{handleNewRecord:this.addRecord.bind(this)}),c)}}]),t}(r.a.Component),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/account-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/account-app","/service-worker.js");w?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):N(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):N(t,e)})}}()}},[[19,2,1]]]);
//# sourceMappingURL=main.bbb61bd6.chunk.js.map